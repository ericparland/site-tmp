<!DOCTYPE html>
<head>
  	<meta charset="utf-8">
  	<meta http-equiv="X-UA-Compatible" content="IE=edge">

 	<title>Eagle - Topology Management</title>
 	<meta name="description" content="Eagle - Analyze Big Data Platforms for Security and Performance">

	<meta name="keywords" content="Eagle, Hadoop, Security, Real Time">
	<meta name="author" content="eBay Inc.">

	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1">

	<link rel="stylesheet" href="/css/animate.css">
	<link rel="stylesheet" href="/css/bootstrap.min.css">

	<link rel="stylesheet" href="/css/font-awesome.min.css">
	
	<link rel="stylesheet" href="/css/misc.css">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/styles.css">
  	<link rel="stylesheet" href="/css/main.css">
  	<link rel="alternate" type="application/rss+xml" title="Eagle" href="http://goeagle.io/feed.xml" />
  	<link rel="shortcut icon" href="/images/favicon.png">

  	<!-- Baidu Analytics Tracking-->
	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?fedc55df2ea52777a679192e8f849ece";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>
	
	<!-- Google Analytics Tracking -->
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-68929805-1', 'auto');
	  ga('send', 'pageview');
	</script>
</head>
<body>
<!-- header start -->
<div id="home_page">
  <div class="topbar">
    <div class="container">
      <div class="row" >
        <nav class="navbar navbar-default">
          <div class="container-fluid"> 
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
              <a class="navbar-brand" href="/"><img src="/images/logo2.png" height="44px" style="margin-top:-7px"></a> </div>
            
            <!-- Collect the nav links, forms, and other content for toggling -->
            <!-- <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right" id="top-menu">
                <li><a class="menu" href="/#home_page">HOME</a></li>
                <li><a class="menu" href="/docs/">DOCS</a></li>
                <li><a class="menu" href="/#about_page">ABOUT</a></li>
                <li><a class="menu" href="/#diagram_page">ARCHITECTURE</a></li>
                <li><a class="menu" href="/#modules_page">MODULES</a></li>
                <li><a class="menu" href="/#usecase_page">USE CASES</a></li>
                <li>
                </li>
              </ul> -->
            </div>
          </div>
          <!-- /.container-fluid --> 
        </nav>
      </div>
    </div>
  </div>
  <div class="headerimage">
    <div class="flexslider">
      <ul class="slides">
        <li><img src="/images/slider/4.jpg" alt="Slide 1"></li>
      </ul>
    </div>
  </div>
  <div class="particles" style="height:40%"> </div><!---particles-->
  <div class="slider-caption" style="top:80px;">
    <div class="homewrapper">
      <div class="hometitle"> 
        <a href="/">
          <img src="/images/feather.png" height="80px">
        </a>
      </div>
      <div class="hometext">
        <h2>Analyze Big Data Platforms For Security and Performance</h2>
        <div class="social-buttons">
          <a href="https://github.com/apache/eagle"><i class="fa fa-github"></i></a>
          <a href="http://twitter.com/TheApacheEagle"><i class="fa fa-twitter"></i></a>
          <a href="https://www.facebook.com/TheApacheEagle/"><i class="fa fa-facebook"></i></a>
          <a href="#"><i class="fa fa-weixin"></i></a>
          <!-- <a href="https://www.weibo.com/ApacheEagle/"><i class="fa fa-weibo"></i></a> -->
        </div>
     </div>
    </div>
  </div>
</div>
<!-- header end -->
<div class="container-fluid page-content">
  <div class="row">
    <div class="col-md-10 col-md-offset-1"> 
      <!-- sidebar -->
      <div class="col-xs-6 col-sm-3" id="sidebar" role="navigation">
        <ul class="nav" id="adminnav">
         
        <li class="heading">Getting Started</li>
        
          <li class="sidenavli  "><a href="/docs/index.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">Introduction</a></li>
        
          <li class="sidenavli  "><a href="/docs/usecases.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">Use Cases</a></li>
        
          <li class="sidenavli  "><a href="/docs/terminology.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">Terminology</a></li>
        
          <li class="sidenavli  "><a href="/docs/ecosystem.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">Ecosystem</a></li>
        
          <li class="sidenavli  "><a href="/docs/community.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">Community</a></li>
        
          <li class="sidenavli  "><a href="/docs/FAQ.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">FAQ</a></li>
        
        <li class="divider"></li>
       
        <li class="heading">Documentations</li>
        
          <li class="sidenavli  "><a href="/docs/latest/" data-permalink="/docs/tutorial/topologymanagement.html" id="">Latest version (v0.5.0)</a></li>
        
        <li class="divider"></li>
       
        <li class="heading">Download</li>
        
          <li class="sidenavli  "><a href="/docs/download-latest.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">Latest version (v0.5.0)</a></li>
        
          <li class="sidenavli  "><a href="/docs/download.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">Archived</a></li>
        
        <li class="divider"></li>
       
        <li class="heading">Supplement</li>
        
          <li class="sidenavli  "><a href="/docs/security.html" data-permalink="/docs/tutorial/topologymanagement.html" id="">Security</a></li>
        
        <li class="divider"></li>
      
        <li class="sidenavli">
          <a href="mailto:dev@eagle.apache.org" target="_blank">Need Help?</a>
        </li>
        </ul>
      </div>
      <div class="col-xs-6 col-sm-9 page-main-content" style="margin-left: -15px" id="loadcontent">
        <h1 class="page-header" style="margin-top: 0px">Topology Management</h1>
        <p><em>Since Apache Eagle 0.4.0-incubating. Apache Eagle will be called Eagle in the following.</em></p>

<blockquote>
  <p>Application manager aims to manage applications on EAGLE UI. Users can easily start/start topologies remotely or locally without any shell commands. At the same, it should be capable to sync the latest status of topologies on the execution platform (e.g., Storm<sup id="fnref:STORM"><a href="#fn:STORM" class="footnote">1</a></sup> cluster).</p>
</blockquote>

<p>This tutorial will go through all parts of application manager and then give an example to use it.</p>

<h3 id="design">Design</h3>
<p>Application manager consists of a daemon scheduler and an execution module. The scheduler periodically loads user operations(start/stop) from database, and the execution module executes these operations. For more details, please refer to <a href="https://cwiki.apache.org/confluence/display/EAG/Application+Management">here</a>.</p>

<h3 id="configurations">Configurations</h3>
<p>The configuration file <code>eagle-scheduler.conf</code> defines scheduler parameters, execution platform settings and parts of default topology configuration.</p>

<ul>
  <li>
    <p><strong>Scheduler properties</strong></p>

    <style>
      table, td, th {
          border-collapse: collapse;
          border: 1px solid gray;
          padding: 10px;
      }
  </style>

    <table>
      <thead>
        <tr>
          <th>Property Name</th>
          <th style="text-align: center">Default</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>appCommandLoaderEnabled</td>
          <td style="text-align: center">false</td>
          <td>topology management is enabled or not</td>
        </tr>
        <tr>
          <td>appCommandLoaderIntervalSecs</td>
          <td style="text-align: center">1</td>
          <td>defines the interval of the scheduler loads commands</td>
        </tr>
        <tr>
          <td>appHealthCheckIntervalSecs</td>
          <td style="text-align: center">5</td>
          <td>define the interval of topology health checking, which syncs the topology execution status from storm cluster to Eagle</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p><strong>Execution platform properties</strong></p>

    <table>
      <thead>
        <tr>
          <th>Property Name</th>
          <th style="text-align: left">Default</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>envContextConfig.env</td>
          <td style="text-align: left">storm</td>
          <td>execution environment, only storm is supported</td>
        </tr>
        <tr>
          <td>envContextConfig.url</td>
          <td style="text-align: left">http://sandbox.hortonworks.com:8744</td>
          <td>storm ui</td>
        </tr>
        <tr>
          <td>envContextConfig.nimbusHost</td>
          <td style="text-align: left">sandbox.hortonworks.com</td>
          <td>storm nimbus host</td>
        </tr>
        <tr>
          <td>envContextConfig.nimbusThriftPort</td>
          <td style="text-align: left">6627</td>
          <td>storm nimbus thrift port</td>
        </tr>
        <tr>
          <td>envContextConfig.jarFile</td>
          <td style="text-align: left">TODO</td>
          <td>storm fat jar path</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p><strong>Topology default properties</strong></p>

    <p>Some default topology properties are defined here.</p>
  </li>
</ul>

<h3 id="playbook">Playbook</h3>

<ol>
  <li>
    <p>Editing eagle-scheduler.conf, and start Eagle service</p>

    <pre><code> # enable application manager       
 appCommandLoaderEnabled = true
    
 # provide jar path
 envContextConfig.jarFile =
    
 # storm nimbus
 envContextConfig.url = "http://sandbox.hortonworks.com:8744"
 envContextConfig.nimbusHost = "sandbox.hortonworks.com"
</code></pre>

    <p>For more configurations, please back to <a href="/docs/configuration.html">Application Configuration</a>. <br />
 After the configuration is ready, start Eagle service <code>bin/eagle-service.sh start</code>.</p>
  </li>
  <li>
    <p>Go to admin page 
<img src="/images/appManager/admin-page.png" alt="admin-page" />
<img src="/images/appManager/topology-monitor.png" alt="topology-monitor" /></p>
  </li>
  <li>Go to management page, and create a topology description. There are three required fields
    <ul>
      <li>name: topology name</li>
      <li>type: topology type [CLASS, DYNAMIC]</li>
      <li>execution entry: either the class which implements interface TopologyExecutable or eagle <a href="https://github.com/apache/eagle/blob/master/eagle-assembly/src/main/conf/sandbox-hadoopjmx-pipeline.conf">DSL</a> based topology definition
<img src="/images/appManager/topology-description.png" alt="topology-description" /></li>
    </ul>
  </li>
  <li>
    <p>Back to monitoring page, and choose the site/application to deploy the topology 
<img src="/images/appManager/topology-execution.png" alt="topology-execution" /></p>
  </li>
  <li>
    <p>Go to site page, and add topology configurations.</p>

    <p><strong>NOTICE</strong> topology configurations defined here are REQUIRED an extra prefix <code>.app</code></p>

    <p>Blow are some example configurations for [site=sandbox, applicatoin=hbaseSecurityLog].</p>

    <pre><code> classification.hbase.zookeeper.property.clientPort=2181
 classification.hbase.zookeeper.quorum=sandbox.hortonworks.com
    
 app.envContextConfig.env=storm
 app.envContextConfig.mode=cluster
    
 app.dataSourceConfig.topic=sandbox_hbase_security_log
 app.dataSourceConfig.zkConnection=sandbox.hortonworks.com:2181
 app.dataSourceConfig.zkConnectionTimeoutMS=15000
 app.dataSourceConfig.brokerZkPath=/brokers
 app.dataSourceConfig.fetchSize=1048586
 app.dataSourceConfig.transactionZKServers=sandbox.hortonworks.com
 app.dataSourceConfig.transactionZKPort=2181
 app.dataSourceConfig.transactionZKRoot=/consumers
 app.dataSourceConfig.consumerGroupId=eagle.hbasesecurity.consumer
 app.dataSourceConfig.transactionStateUpdateMS=2000
 app.dataSourceConfig.deserializerClass=org.apache.eagle.security.hbase.parse.HbaseAuditLogKafkaDeserializer
    
 app.eagleProps.site=sandbox
 app.eagleProps.application=hbaseSecurityLog
 app.eagleProps.dataJoinPollIntervalSec=30
 app.eagleProps.mailHost=some.mail.server
 app.eagleProps.mailSmtpPort=25
 app.eagleProps.mailDebug=true
 app.eagleProps.eagleService.host=localhost
 app.eagleProps.eagleService.port=9099
 app.eagleProps.eagleService.username=admin
 app.eagleProps.eagleService.password=secret
</code></pre>

    <p><img src="/images/appManager/topology-configuration-1.png" alt="topology-configuration-1" />
<img src="/images/appManager/topology-configuration-2.png" alt="topology-configuration-2" /></p>
  </li>
  <li>
    <p>Go to monitoring page, and start topologies
<img src="/images/appManager/start-topology-1.png" alt="start-topology-1" />
<img src="/images/appManager/start-topology-2.png" alt="start-topology-2" /></p>
  </li>
  <li>stop topologies on monitoring page
<img src="/images/appManager/stop-topology-1.png" alt="stop-topology-1" />
<img src="/images/appManager/stop-topology-2.png" alt="stop-topology-2" />
<img src="/images/appManager/stop-topology-3.png" alt="stop-topology-3" /></li>
</ol>

<hr />

<h4 id="footnotes"><em>Footnotes</em></h4>

<div class="footnotes">
  <ol>
    <li id="fn:STORM">
      <p><em>All mentions of “storm” on this page represent Apache Storm.</em> <a href="#fnref:STORM" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

      </div><!--end of loadcontent-->  
    </div>
    <!--end of centered content--> 
  </div>
</div>
<!--end of container-->

<!-- footer start -->
<div class="footerwrapper">
  <div class="container">
    <div class="row">
      <div class="col-md-12"><div style="margin-left:auto; margin-right:auto; text-align:center;font-size: 12px">
<div>
</div>
<div>
<a href="http://www.apache.org">
<img id="asf-logo" alt="Apache Software Foundation" src="/images/apache-logo-small.gif">
</a>
</div>
<div>
Copyright © 2015 <a href="http://www.apache.org">The Apache Software Foundation</a>, Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
</div>
<div>
Apache Eagle, Eagle, Apache Hadoop, Hadoop, Apache HBase, HBase, Apache Hive, Hive, Apache Ambari, Ambari, Apache Spark, Spark, Apache Kafka, Kafka, Apache Storm, Storm, Apache Maven, Maven, Apache Tomcat, Tomcat, Apache Derby, Derby, Apache Cassandra, Cassandra, Apache ZooKeeper, ZooKeeper, Apache, the Apache feather logo, and the Apache project logo are trademarks of The Apache Software Foundation.
</div>
      </div></div>
    </div>
  </div>
</div>
<!-- footer end --> 

<!-- JavaScripts -->
<script src="/js/jquery-1.11.1.min.js"></script>
<script src="/js/jquery.singlePageNav.js"></script>
<script src="/js/jquery.flexslider.js"></script>
<script src="/js/modernizr.min.js"></script>
<script src="/js/svg.js"></script>
<script>
    /************** FlexSlider *********************/
    $('.flexslider').flexslider({
        animation: "fade",
        directionNav: false
    });
</script>

<script>
    /************** FlexSlider *********************/
    $('.flexslider').flexslider({
        animation: "fade",
        directionNav: false
    });
</script>
</body>
</html>
